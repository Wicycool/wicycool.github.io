<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wicycool - Stuff</title>
    <link rel="stylesheet" href="../assets/css/mystyles.css">
    <style>
        @keyframes fadein{
            from{bottom: 50px; opacity: 0;}
            to{bottom: 0px; opacity: 1;}
        }
        .card{
            position: relative;
            animation-duration: 0.25s;
            animation-fill-mode: backwards;
        }
        .tabs li.is-active a{
            border-width: 2px;
        }
    </style>
</head>

<body>
    <section class="hero is-fullheight">
        <div class="hero-body">
            
            <div class="container is-widescreen has-text-left">
                <p class="title is-5"><a class="" href="../">‚Üê Back to homepage</a></p>
                <div class="tabs">
                    <ul>
                        <li><a>About</a></li>
                        <li class="is-active"><a>Projects</a></li>
                        <li><a>Social Media</a></li>
                    </ul>
                </div>
                <h1 class="title is-2" id="projects">Projects </h1>
                <noscript>It looks like JavaScript is disabled or not supported on your browser... To see projects, please enable JS! :)</noscript>
                <div class="loading-indicator has-text-grey-dark" style="display: none;">Loading items...</div>
                <div class="columns" id="projects-container">
                    <div class="column">
                    </div>
                    <div class="column">
                    </div>
                    <div class="column">
                    </div>
                </div>
            </div>  
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        var sanitizeHTML = function (str) {
            return str.replace(/[^\w. ]/gi, function (c) {
                return '&#' + c.charCodeAt(0) + ';';
            });
        };
        var projects = document.querySelector("#projects-container");
        document.querySelector(".loading-indicator").style.display = "";
        axios.get("../assets/json/projects.json")
        .then(function(response){
            document.querySelector(".loading-indicator").style.display = "none";
            console.log(response.data);
            //console.log(response.data.length);
            var hoverSound = new Audio('../assets/sound/wav/03/custom_fadein.wav');
            for (let i = 0; i < response.data.length; i++){
                switch(response.data[i]["type"]){
                    case "scratch":
                        typeName = "Scratch";
                        typeImage = `url('https://scratch.mit.edu/favicon.ico')`;
                    break;
                    case "video":
                        typeName = "Video";
                        typeImage = `url('https://www.youtube.com/s/desktop/4fc9328c/img/favicon_144.png')`;
                    break;
                    case "scratchaddons":
                        typeName = "Addon for ScratchAddons";
                        typeImage = `url('https://scratchaddons.com/assets/images/icon.svg')`;
                    break;
                    case "video-series":
                        typeName = "Video Series";
                        typeImage = `url('https://www.youtube.com/s/desktop/4fc9328c/img/favicon_144.png')`;
                    break;
                    case "artwork":
                        typeName = "Artwork";
                        typeImage = `url('../assets/images/brush-white-24dp.svg')`;
                    break;
                    default:
                        currentCardMediaContentSubtitle.innerText = "";
                        typeImage = `url('../assets/images/help_outline-white-24dp.svg')`;
                    break;
                }
                finalCard = document.querySelector(`#projects-container .column:nth-child(${i % 3 + 1})`).insertAdjacentHTML("beforeend", `
                    <a class="linktocard" href="${sanitizeHTML(response.data[i]["link"])}">
                        <div class="card mb-5" style="opacity: 1; animation-delay: ${i*50}ms; animation-name: fadein;">
                            <div class="card-image">
                                <figure class="image is-4by3">
                                    <img class="" src="../assets/images/empty.png" style='background: center / cover no-repeat url(${response.data[i]["thumbnail"]})'>
                                </figure>
                            </div>
                            <div class="card-content">
                                <div class="media">
                                    <div class="media-left">
                                        <figure class="image is-24x24" style="background-size: contain; background-image: ${sanitizeHTML(typeImage)};"></figure>
                                    </div>
                                    <div class="media-content">
                                        <p class="title is-4">${sanitizeHTML(response.data[i]["name"])}</p>
                                        <p class="subtitle is-6">${sanitizeHTML(typeName)}</p>
                                        <p class="is-size-7">${sanitizeHTML(response.data[i]["description"])}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                `);
                setTimeout(function () {
                    hoverSound.currentTime = 0;
                    hoverSound.play();
                }, i * 50);
            }
            
        }).catch(function(error){
            document.querySelector(".loading-indicator").style.display = "none";
            document.querySelector(`#projects-container`).innerText = "Failed getting projects... let Wicycool know or try again later! :)";
        });
    </script>
</body>